@import util.div
@import com.malliina.play.models.Username

@(query: Option[String], results: Seq[com.malliina.musicpimp.db.DataTrack], wsUrl: String, request: RequestHeader, username: Username)

@libraryBase("search", username) {
    @bs.rowColumn12 {
        @div("page-header") {
            <h1>Search</h1>
        }
    }
    @bs.row {
        @div("col-md-4") {
            @searchForm(None, "", "input-group-lg")
        }
        @div("col-md-4 col-md-offset-4") {
            <button class="btn btn-default btn-lg" type="button" onclick="refresh()"><i class="glyphicon glyphicon-refresh"></i></button>
            <span id="index-info"></span>
        }
    }
    @bs.rowColumn("col-md-12") {
        @if(results.nonEmpty) {
            <table class="table table-striped table-hover table-responsive">
                <thead>
                    <tr><th>Track</th>
                        <th>Artist</th>
                        <th>Album</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                @results.map { row =>
                    <tr><td>@row.title</td>
                        <td>@row.artist</td>
                        <td>@row.album</td>
                        <td>@trackActions(row, "flex")</td>
                    </tr>
                }
                </tbody>
            </table>
        }
        @query.filter(_ => results.isEmpty).map { term =>
            <h3>No results for "@term".</h3>
        }
    }
}
@util.script2("search.js", "json.js", "library.js")
@wsopen(wsUrl, request)
